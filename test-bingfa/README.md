# 并发的需求

## 具体例子

活动中当前状态需要查询多个接口，返回时根据接口弹出不同状态弹窗，弹窗不可以叠加，弹完一个弹窗之后才能弹出下一个弹窗

## 实现

此时我们简单的方法就是promise.then一层层嵌套去处理，如果接口是在不同组件中处理的呢，比如排行榜组件，任务组件等等，此时再用promise.then处理就会异常麻烦

### 实现思路

- 当我们需要处理接口时不直接执行，创建一个队列，存储每一个事件
- 创建一个任务执行池，获取队列中的第一个事件，存一个标识位，判断当前是否有进行中的事件
- 每次执行完一个事件后，当队列不为空时，处理下一个事件

#### 具体实现

- 使用队列来保证并发执行的顺序，在javascript中可以使用数组来模拟队列
- 创建一个任务管理池子用来执行任务，并且保证同时执行的任务数
- 单个任务，管理单个任务的创建，以及执行

### 进阶，并发数增多，比如同时执行多个任务

- 此时标识位可以用并发数代替，如果同时进行中的事件超过并发数就不执行